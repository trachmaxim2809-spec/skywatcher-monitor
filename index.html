<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkyWatcher Tactical Map</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #05070a;
            overflow: hidden;
        }

        #map {
            height: 100vh;
            width: 100vw;
            background: #05070a;
        }

        /* ТАКТИЧЕСКИЙ ФИЛЬТР (Делает карту темной) */
        .leaflet-tile-pane {
            filter: invert(100%) hue-rotate(180deg) brightness(40%) contrast(120%);
        }

        /* Скрываем лишние элементы управления */
        .leaflet-control-attribution {
            display: none;
        }
    </style>
</head>

<body>

    <div id="map"></div>

    <script>
        // Инициализация Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand(); // Развернуть на весь экран
        tg.headerColor = '#05070a'; // Цвет шапки в тон карты

        // Создаем карту (Центр — Украина)
        var map = L.map('map', {
            zoomControl: false,
            center: [48.3794, 31.1656],
            zoom: 6,
            minZoom: 5
        });

        // Загружаем слой карты (OpenStreetMap — бесплатно)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Настройка иконки Шахеда
        var shahedIcon = L.icon({
            iconUrl: 'https://cdn-icons-png.flaticon.com/512/584/584011.png', // Пока тестовая белая иконка
            iconSize: [30, 30],
            iconAnchor: [15, 15]
        });

        // ПРИМЕР: Добавляем метку в Киев (50.45, 30.52)
        var marker = L.marker([50.4501, 30.5234], { icon: shahedIcon }).addTo(map);
        marker.bindPopup("<b style='color:red'>Объект: БПЛА</b><br>Направление: Юг");

    </script>
</body>

</html>